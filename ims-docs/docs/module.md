# 模块

我们的整体架构采用了前后端分离的设计思路，前端主要负责数据的获取和展示，而后端主要负责数据的收集、整合和计算。

## 前端

前端分为**注册模块**、**登录模块**、**展示界面模块**、**聊天模块**、**好友/群聊列表模块**、**搜索模块**、**好友/群聊审批模块**、**个人详细信息模块**和**群聊详细信息模块**。这些模块分别对应着不同的路由：

| 模块 | 路由 |
|:-:|:-:|
| 展示界面模块 | `/` |
| 注册模块 | `/register` |
| 登录模块 | `/login` |
| 聊天模块 | `/chat` |
| 好友/群聊列表模块 | `/list` |
| 搜索模块 | `/search` |
| 好友/群聊审批模块 | `/request` |
| 个人详细信息模块 | `/user` |
| 群聊详细信息模块 | `/group` |

### 注册模块

该模块负责处理用户注册的功能。它提供了用户注册界面，包括用户名、密码和其他必要的个人信息输入字段。该模块验证用户提供的信息的有效性，并将注册信息存储到数据库中。

### 登录模块

该模块负责处理用户登录的功能。它提供了用户登录界面，用户可以输入其注册时使用的用户名和密码来验证身份。登录模块会验证用户提供的凭据，并在验证成功后将用户重定向到应用程序的主界面。它还可以包括记住登录状态的选项，以便用户在下次访问应用程序时自动登录。

### 展示界面模块

该模块是应用程序的前端界面，它负责呈现最终的用户界面。该模块会将其他模块集成到一个统一的界面中，以便用户可以方便地访问各个功能模块。展示界面模块包括导航栏、页面布局和其他用户界面元素，以提供用户友好的交互体验。

### 聊天模块

该模块负责处理用户之间的实时聊天功能。它提供了一个聊天界面，用户可以通过该界面发送和接收消息。聊天模块可以支持一对一聊天和群组聊天，用户可以选择与好友或群组进行聊天。该模块包括消息输入框、消息历史记录筛选与查找、聊天会话选择和其他与聊天相关的功能。

### 好友/群聊列表模块

该列表模块负责展示当前用户的好友列表和群聊列表。它提供了一个界面，列出用户已添加为好友的其他用户以及用户参与的群聊。该模块能够显示好友和群组的名称、头像等信息，并提供与它们进行交互的选项，例如查看详细信息。

### 搜索模块

该模块负责实现用户搜索好友和群聊的功能。它提供了一个搜索界面，用户可以输入用户昵称或群聊名称来查找具有匹配信息的用户或群组。搜索模块会根据用户的搜索条件在数据库中进行查询，并将匹配的结果展示给用户。用户可以选择在搜索结果中通过查看个人详细信息或群聊纤细信息，以添加好友或加入群聊。

### 好友/群聊审批模块

该模块负责展示好友审批的功能。当用户收到其他用户的好友请求或被邀请加入群聊时，该模块会显示待审批的请求或邀请。用户可以查看请求的详细信息，如请求人的用户名和理由，并选择接受或拒绝请求。

### 个人详细信息模块

该模块负责展示当前用户的个人详细信息。它提供了一个界面，显示用户的用户名、头像、个人简介和其他相关信息。用户可以在该界面上编辑和更新个人信息，还能够修改密码、更改头像等。

### 群聊详细信息模块

该模块负责展示群聊的详细信息。它提供了一个界面，显示群聊的名称、群主、管理员列表、成员列表、群聊公告、群聊头像等详细信息。用户可以在该界面上查看群聊的基本信息，并进行与群聊相关的操作，如发送消息、添加成员、删除成员、编辑公告（如果有权限）等。群聊信息模块可以提供管理员权限管理、群聊设置和其他与群聊管理相关的功能。

## 后端

前端分为**数据库模块**、**路由模块**、**工具模块**、**测试模块**，其中数据库/路由模块内部又分为**用户模块**、**好友模块**、**群组模块**、**会话模块**，测试模块涵盖以上所有模块。

### 数据库模块

该模块负责处理所有数据库信息，包含数据库连接、用户模块、好友模块、群组模块与会话模块，每个模块内部还能细分：

| 用户模块 | 好友模块                  | 群组模块             | 会话模块        |
| ---- | --------------------- | ---------------- | ----------- |
| user | friendship            | group            | convMessage |
|      | friendshipApplication | groupMember      |             |
|      |                       | groupApplication |             |
详情参见数据库相关说明。

### 路由模块

该模块负责定义所有路由处理函数，包括用户模块、好友模块、群组模块与会话模块。

| 用户模块                    | 好友模块         | 群组模块         | 会话模块                    |
| ----------------------- | ------------ | ------------ | ----------------------- |
| 登录                      | 发送/接受/拒绝好友申请 | 发送/接受/拒绝入群申请 | 私聊                      |
| 注册                      | 编辑好友标签       | 拉人建群         | 群聊                      |
| 注销                      | 删除好友         | 编辑群信息        | 筛选聊天（全量/按时间/按发送者/按内容）记录 |
| 获取个人信息（用户名、昵称、头像、简介、邮箱） |              | 转让群主         | 回复消息                    |
| 编辑个人信息                  |              | 设置管理员        | 未读计数                    |
| 修改密码                    |              | 踢除群成员        | 删除消息                    |
| 获取好友列表                  |              | 退出群聊         |                         |
| 获取群聊列表                  |              |              |                         |
| 获取申请列表                  |              |              |                         |

### 工具模块

该模块定义了特殊常量，以及加密函数、获取/验证 JWT 的函数、获取在线状态等功能函数，在 WebSocket 等技术当中需要调用该处的功能函数。

### 测试模块

该模块定义了以上所有模块的测试文件。
